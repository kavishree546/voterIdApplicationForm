<!DOCTYPE html>
<html>
<head>
    <title>All Events Form Validation</title>
    <style>
        .error { color: red; }
        .success { color: green; }
        input { margin-bottom: 5px; }
    </style>
</head>
<body>

<h2>Complete Event-Based Form</h2>

<form id="myForm">

Username:
<input type="text" id="username" required>
<span id="userError" class="error"></span>
<br><br>

Email:
<input type="text" id="email" required>
<span id="emailError" class="error"></span>
<br><br>

Password:
<input type="password" id="password" required>
<span id="passError" class="error"></span>
<br><br>

Confirm Password:
<input type="password" id="confirmPassword" required>
<span id="confirmError" class="error"></span>
<br><br>

Phone:
<input type="text" id="phone" required>
<span id="phoneError" class="error"></span>
<br><br>

Age:
<input type="number" id="age" required>
<span id="ageError" class="error"></span>
<br><br>

<input type="submit" id="submitBtn">

</form>

<script>

// USERNAME EVENTS
let valid=true;
let username = document.getElementById("username");

username.addEventListener("focus", function() {
    console.log("Username focused");
});

username.addEventListener("blur", function() {
    console.log("Username left");
});

username.addEventListener("keydown", function() {
    console.log("Key pressed");
});

username.addEventListener("keyup", function() {
    if (this.value.length < 3) {
        valid=false;
        document.getElementById("userError").textContent =
        "Minimum 3 characters required";
    } else {
        document.getElementById("userError").textContent = "";
    }
});

username.addEventListener("input", function() {
    console.log("Username input changed");
});

username.addEventListener("change", function() {
    console.log("Username value changed and exited");
});

username.addEventListener("click", function() {
    console.log("Username clicked");
});


// EMAIL
document.getElementById("email")
.addEventListener("blur", function() {

    let emailPattern = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/;

    if (!emailPattern.test(this.value)) {
        valid=false;
        document.getElementById("emailError").textContent =
        "Enter valid email";
    } else {
        valid=true;
        document.getElementById("emailError").textContent = "";
    }

});


// PASSWORD
document.getElementById("password")
.addEventListener("input", function() {

    if (this.value.length < 6) {
        valid=false;
        document.getElementById("passError").textContent =
        "Password must be at least 6 characters";
    } else {
        valid=true;
        document.getElementById("passError").textContent = "";
    }

});


// CONFIRM PASSWORD
document.getElementById("confirmPassword")
.addEventListener("keyup", function() {

    let password = document.getElementById("password").value;

    if (this.value !== password) {
        valid=false;
        document.getElementById("confirmError").textContent =
        "Passwords do not match";
    } else {
        valid=true;
        document.getElementById("confirmError").textContent = "";
    }

});


// PHONE (change event example)
document.getElementById("phone")
.addEventListener("change", function() {

    let phonePattern = /^[0-9]{10}$/;

    if (!phonePattern.test(this.value)) {
        valid=false;
        document.getElementById("phoneError").textContent =
        "Enter 10 digit phone number";
    } else {
        valid=true
        document.getElementById("phoneError").textContent = "";
    }

});


// AGE
document.getElementById("age")
.addEventListener("input", function() {

    if (this.value < 18 || this.value > 60) {
        valid=false;
        document.getElementById("ageError").textContent =
        "Age must be between 18 and 60";
    } else {
        valid=true;
        document.getElementById("ageError").textContent = "";
    }

});


// CLICK EVENT ON SUBMIT BUTTON
document.getElementById("submitBtn")
.addEventListener("click", function() {
    console.log("Submit button clicked");
});


// FORM SUBMIT EVENT
document.getElementById("myForm")
.addEventListener("submit", function(event) {

   let valid = true;

    if(username.value.length < 3) valid = false;
    if(password.value.length < 6) valid = false;
    if(confirmPassword.value !== password.value) valid = false;
    if(!/^[0-9]{10}$/.test(phone.value)) valid = false;
    if(age.value < 18 || age.value > 60) valid = false;
    if(!/^[^ ]+@[^ ]+\.[a-z]{2,3}$/.test(email.value)) valid = false;

    if(!valid){
        event.preventDefault();
        alert("Fix errors before submitting");
    } else {
        alert("Form Submitted Successfully!");
    }

});

</script>

</body>
</html>